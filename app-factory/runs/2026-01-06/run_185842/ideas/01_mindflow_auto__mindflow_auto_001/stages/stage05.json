{
  "meta": {
    "run_id": "run_185842",
    "idea_id": "mindflow_auto_001",
    "idea_name": "MindFlow Auto",
    "idea_dir": "01_mindflow_auto__mindflow_auto_001",
    "source_root": "/Users/melted/Documents/GitHub/app factory/runs/2026-01-06/run_185842/ideas/01_mindflow_auto__mindflow_auto_001",
    "input_stage_paths": [
      "runs/2026-01-06/run_185842/ideas/01_mindflow_auto__mindflow_auto_001/stages/stage04.json",
      "runs/2026-01-06/run_185842/ideas/01_mindflow_auto__mindflow_auto_001/stages/stage03.json",
      "runs/2026-01-06/run_185842/ideas/01_mindflow_auto__mindflow_auto_001/stages/stage02.json",
      "runs/2026-01-06/run_185842/ideas/01_mindflow_auto__mindflow_auto_001/meta/idea.json"
    ],
    "boundary_path": "runs/2026-01-06/run_185842/ideas/01_mindflow_auto__mindflow_auto_001/meta/boundary.json"
  },
  "technical_architecture": {
    "technology_stack": {
      "framework": {
        "react_native_version": "0.83",
        "expo_sdk_version": "55",
        "rationale": "Latest stable versions with New Architecture enabled by default, providing improved performance and build times. SDK 55 released January 2026 with React Native 0.83."
      },
      "navigation": {
        "library": "expo-router",
        "version": "4.1.x",
        "routing_strategy": "File-based routing with tab navigation structure matching UX design: (tabs)/_layout.tsx with today, decisions, insights, settings"
      },
      "state_management": {
        "approach": "context",
        "rationale": "Context API sufficient for MVP complexity while maintaining simplicity. Decision automation state naturally hierarchical and doesn't require complex async operations that would justify Redux.",
        "data_flow_pattern": "Provider pattern with custom hooks for decision tracking, automation preferences, and user profile management"
      },
      "ui_library": {
        "primary": "React Native Elements + Expo UI",
        "components": ["Button", "Card", "Input", "Icon", "ListItem", "Tab"],
        "customization_approach": "Theme-based customization aligned with platform design systems (iOS HIG/Material Design 3)"
      }
    },
    "data_architecture": {
      "local_storage": {
        "primary": "expo_sqlite",
        "rationale": "Decision logging requires relational data structure for patterns and AI learning. SQLite provides offline-first capability essential for decision tracking throughout the day.",
        "data_structure": "Tables: decisions, automation_rules, user_preferences, decision_patterns, automation_results"
      },
      "cloud_sync": {
        "approach": "firebase",
        "rationale": "Firebase Firestore provides real-time sync for premium users, handles authentication, and integrates well with RevenueCat for subscription management.",
        "sync_strategy": "Offline-first with background sync. Local SQLite as source of truth, Firebase for cross-device sync and backup for premium users only."
      },
      "offline_capability": {
        "strategy": "Full offline functionality for core features with sync when connected",
        "cached_data": ["User preferences", "Decision patterns", "Automation rules", "Recent decision logs"],
        "conflict_resolution": "Last-write-wins for user preferences, append-only for decision logs, version-based for automation rules"
      }
    },
    "subscription_integration": {
      "revenuecat_sdk": {
        "version": "9.6.7",
        "configuration": "Platform-specific API keys with entitlement-based access control",
        "entitlement_handling": "Check entitlements before accessing premium features, graceful degradation to free tier functionality"
      },
      "purchase_flow": {
        "presentation": "Bottom sheet paywall with clear value proposition and dismissible design",
        "restoration": "Automatic purchase restoration on app launch and manual restore button in settings",
        "error_handling": "User-friendly error messages for payment failures, network issues, and subscription problems"
      }
    },
    "security_privacy": {
      "data_encryption": {
        "at_rest": "SQLite database encryption using SQLCipher for sensitive decision data",
        "in_transit": "HTTPS/TLS for all network communication, Firebase Security Rules for data access",
        "key_management": "Expo SecureStore for API keys and sensitive configuration, device keychain integration"
      },
      "privacy_compliance": {
        "data_minimization": "Collect only decision patterns necessary for automation, no personal identifiers in logs",
        "user_consent": "Explicit consent for data collection during onboarding, granular privacy controls in settings",
        "data_export": "User data export functionality for GDPR compliance, account deletion with complete data removal"
      },
      "api_security": {
        "authentication": "Firebase Authentication with anonymous and email options",
        "authorization": "Firebase Security Rules with user-specific data access controls",
        "rate_limiting": "Firebase rate limiting and Cloud Functions for API protection"
      }
    },
    "performance_optimization": {
      "app_startup": {
        "target_time": "Under 2 seconds cold start on mid-range devices",
        "optimization_strategies": ["Lazy loading of non-essential screens", "SQLite connection pooling", "Precompiled XCFrameworks for iOS build speed", "New Architecture enabled for improved performance"]
      },
      "memory_management": {
        "image_optimization": "Expo Image for automatic optimization and caching",
        "component_lifecycle": "Proper cleanup of listeners and timers, efficient Context usage",
        "memory_leaks_prevention": "Regular performance monitoring, proper component unmounting, efficient state updates"
      },
      "network_optimization": {
        "caching_strategy": "Firebase offline persistence for cloud data, SQLite for local decision cache",
        "request_batching": "Batch decision uploads when connectivity restored",
        "offline_queue": "Queue automation requests for processing when online, prioritize essential data sync"
      }
    },
    "platform_integrations": {
      "ios_specific": {
        "features": ["Dynamic Type support", "VoiceOver accessibility", "Shortcuts app integration"],
        "apis_used": ["EventKit for calendar", "HealthKit for potential future integrations", "Notification Center"],
        "permissions": ["Calendar access (optional)", "Notifications", "Location for context (optional)"]
      },
      "android_specific": {
        "features": ["TalkBack accessibility", "Android shortcuts", "Adaptive icons"],
        "apis_used": ["CalendarContract for calendar", "NotificationManager", "Location services"],
        "permissions": ["CALENDAR_READ (optional)", "NOTIFICATION_POST", "ACCESS_COARSE_LOCATION (optional)"]
      },
      "cross_platform": {
        "shared_features": ["Decision logging", "Automation engine", "Preference learning", "Cross-device sync"],
        "platform_abstractions": ["Calendar access wrapper", "Notification wrapper", "Secure storage wrapper"]
      }
    },
    "development_workflow": {
      "build_system": "eas_build",
      "testing_strategy": {
        "unit_tests": "Jest for business logic and utility functions, 80%+ coverage for core automation algorithms",
        "integration_tests": "Testing Library for component interaction, automation flow testing",
        "e2e_tests": "Detox for critical user journeys: onboarding, decision logging, subscription flow"
      },
      "deployment": {
        "staging": "EAS Build development builds for internal testing, Expo Development Client for rapid iteration",
        "production": "EAS Submit for store deployment, staged rollouts for major updates",
        "rollback_strategy": "EAS Update for JavaScript-only rollbacks, store version rollback for native issues"
      }
    }
  }
}
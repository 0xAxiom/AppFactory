{
  "stage": "W4",
  "framework": {
    "name": "Next.js",
    "version": "14.x",
    "router": "App Router",
    "rendering": "Hybrid (SSR + Client Components)"
  },
  "technology_stack": {
    "frontend": {
      "framework": "Next.js 14",
      "ui_library": "React 18",
      "language": "TypeScript 5.x",
      "styling": "Tailwind CSS 3.x",
      "components": "Radix UI primitives",
      "state_management": "Zustand",
      "forms": "React Hook Form + Zod"
    },
    "web3": {
      "wallet_adapter": "@solana/wallet-adapter-react 0.15.x",
      "solana_web3": "@solana/web3.js 1.9.x",
      "spl_token": "@solana/spl-token 0.4.x",
      "anchor": "@coral-xyz/anchor 0.29.x"
    },
    "real_time": {
      "websocket": "Socket.io",
      "audio": "Web Audio API + MediaRecorder",
      "video": "FFmpeg WASM for clip generation"
    },
    "backend": {
      "api": "Next.js Route Handlers",
      "database": "PostgreSQL via Prisma",
      "cache": "Redis for matchmaking queue",
      "ai": "OpenAI API for prompts and judging"
    },
    "infrastructure": {
      "hosting": "Vercel",
      "database": "Supabase PostgreSQL",
      "storage": "Cloudflare R2",
      "cdn": "Vercel Edge Network"
    }
  },
  "wallet_integration": {
    "supported_wallets": [
      "Phantom",
      "Solflare",
      "Backpack",
      "Ledger"
    ],
    "connection_strategy": "Lazy connection - prompt only when needed for transactions",
    "persistence": "Auto-reconnect using localStorage adapter state",
    "network": "mainnet-beta (devnet for testing)"
  },
  "data_architecture": {
    "onchain_state": [
      "ROAST token balances",
      "Battle escrow accounts",
      "Prize pool distributions",
      "Fee routing transactions"
    ],
    "offchain_state": [
      "User profiles and preferences",
      "Battle history and recordings",
      "Leaderboard calculations",
      "Matchmaking queue",
      "AI prompts and scores",
      "Clip metadata and URLs"
    ],
    "hybrid_state": [
      "Earnings (onchain source, cached offchain)",
      "Battle results (recorded onchain, indexed offchain)"
    ]
  },
  "api_architecture": {
    "public_routes": [
      "GET /api/leaderboard",
      "GET /api/clips",
      "GET /api/battles/:id"
    ],
    "authenticated_routes": [
      "POST /api/battles/join",
      "POST /api/battles/:id/roast",
      "POST /api/tips",
      "GET /api/profile",
      "GET /api/earnings"
    ],
    "websocket_events": [
      "battle:matched",
      "battle:round_start",
      "battle:roast_submitted",
      "battle:score_revealed",
      "battle:ended",
      "reaction:sent",
      "tip:received"
    ]
  },
  "security": {
    "authentication": "Wallet signature verification (SIWS - Sign In With Solana)",
    "authorization": "JWT tokens with wallet address claims",
    "rate_limiting": "Per-wallet rate limits on transactions",
    "content_moderation": "AI content filter on roasts before scoring",
    "input_validation": "Zod schemas on all inputs"
  },
  "performance": {
    "code_splitting": "Route-based with dynamic imports",
    "caching": "SWR for data fetching, Redis for hot data",
    "optimizations": [
      "Image optimization via next/image",
      "Font optimization via next/font",
      "Edge functions for global performance"
    ]
  },
  "validation": {
    "production_ready": true,
    "wallet_strategy_complete": true,
    "data_architecture_defined": true,
    "security_addressed": true
  }
}

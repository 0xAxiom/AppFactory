# W2: Token Role Definition (Token Launch v2 Compliant)

## AGENT-NATIVE EXECUTION
You are Claude executing W2 for Web3 Factory. Define the token's exact role and economics for the validated Web3 app concept, with optional token creation and social fee claimers support.

## TOKEN NECESSITY EVALUATION (MANDATORY FIRST STEP)

**CRITICAL**: Not all Web3 apps need tokens. Evaluate token necessity before proceeding.

### Token Justification Criteria

A token is justified when it enables:
1. **Shared State Coordination**: Multiple users need verifiable, shared data
2. **Network Effects**: Value increases with more onchain participants
3. **Permissionless Access**: Censorship resistance provides meaningful value
4. **Programmable Incentives**: Token-based rewards improve user behaviors

### Token-Free Web3 Apps

Some Web3 apps benefit from blockchain without tokens:
- **Decentralized Identity**: Wallet-based auth without payment
- **NFT Platforms**: Trading NFTs in SOL/USDC
- **Data Storage**: IPFS/Arweave storage with SOL payments
- **Voting Systems**: Governance without native tokens

**Decision Point**: Does this app REQUIRE a token to function effectively?

## TOKEN CREATION OPTIONS

### Option 1: Token-Powered App
- Create custom SPL token via Bags SDK
- Implement token-based user incentives
- Enable fee capture via token economics
- Full Token Launch v2 compliance

### Option 2: Token-Free Web3 App  
- Wallet-based authentication only
- SOL/USDC for any payments
- Onchain data without custom token
- Simpler user experience

**RULE**: Only create tokens when they meaningfully improve the app. Token-free Web3 apps are valid outputs.

## TOKEN ROLE SELECTION (IF CREATING TOKEN)

If proceeding with token creation, choose EXACTLY ONE primary role:

### 1. ACCESS
Token grants access to app features or content
- Example: Pay tokens to unlock premium features
- Supply: Usually deflationary or fixed
- Behavior: Users spend tokens to access functionality

### 2. USAGE  
Token consumed during app usage/transactions
- Example: Pay tokens per API call, per transaction, per action
- Supply: Can be inflationary with burn mechanisms
- Behavior: Users spend tokens for each use

### 3. FEE CAPTURE
Token holders receive fees generated by the app
- Example: Revenue sharing with token holders
- Supply: Usually fixed with distribution mechanisms
- Behavior: Users hold tokens to earn fees

### 4. SETTLEMENT
Token used as settlement layer for app transactions
- Example: All trades/payments denominated in the token
- Supply: Stable supply with predictable inflation
- Behavior: Users transact in the token

### 5. GOVERNANCE-LITE
Token grants voting rights on simple app parameters
- Example: Vote on fee rates, feature priorities
- Supply: Usually fixed with delegation mechanisms  
- Behavior: Users hold tokens to participate in decisions

**RULE**: Choose ONE primary role. Secondary characteristics are allowed but must be clearly subordinate.

## SOCIAL FEE CLAIMERS SUPPORT

### Token Launch v2 New Feature

Enable social identity fee claimers alongside wallet addresses:

**Supported Providers**:
- **GitHub**: Developer equity for contributors
- **Twitter**: Marketing team compensation  
- **Kick**: Gaming/streaming community rewards

### Fee Claimer Examples

```typescript
// Development team with GitHub contributors
const devTeamClaimers = [
  { wallet: "creator_address", bps: 6000 },      // Creator: 60%
  { provider: 'github', username: 'lead_dev', bps: 1500 },  // Lead dev: 15%
  { provider: 'github', username: 'ui_designer', bps: 1000 }, // Designer: 10%  
  { provider: 'twitter', username: '@community_mgr', bps: 500 }, // Community: 5%
  // Partner: 10% (automatic)
];

// Simple creator-only setup
const simpleClaimers = [
  { wallet: "creator_address", bps: 7500 },      // Creator: 75%
  // Partner: 25% (automatic)
];
```

**Strategic Value**: GitHub username resolution enables developer equity in tokenized apps.

## INPUTS
- Read: `web3-factory/runs/.../w1/web3_idea.json`

## OUTPUTS
- Write: `web3-factory/runs/.../w2/token_model.json`
- Write: `web3-factory/runs/.../w2/w2_execution.md`

## JSON SCHEMA (TOKEN LAUNCH V2 COMPLIANT)
```json
{
  "type": "object",
  "properties": {
    "token_necessity": {
      "type": "object",
      "properties": {
        "requires_token": {"type": "boolean"},
        "justification": {"type": "string"},
        "token_benefits": {"type": "array", "items": {"type": "string"}},
        "token_free_alternative": {"type": "string"},
        "decision_reasoning": {"type": "string"}
      },
      "required": ["requires_token", "justification", "decision_reasoning"]
    },
    "token_definition": {
      "type": "object",
      "properties": {
        "token_name": {"type": "string"},
        "token_symbol": {"type": "string"},
        "primary_role": {"enum": ["access", "usage", "fee_capture", "settlement", "governance_lite"]},
        "role_description": {"type": "string"},
        "functional_purpose": {"type": "string"}
      },
      "required": ["token_name", "token_symbol", "primary_role", "role_description", "functional_purpose"]
    },
    "supply_model": {
      "type": "object",
      "properties": {
        "total_supply": {"type": "string"},
        "supply_type": {"enum": ["fixed", "mint_on_use", "hybrid"]},
        "inflation_rate": {"type": "string"},
        "burn_mechanism": {"type": "string"},
        "supply_justification": {"type": "string"}
      },
      "required": ["total_supply", "supply_type", "inflation_rate", "burn_mechanism", "supply_justification"]
    },
    "ownership_model": {
      "type": "object",
      "properties": {
        "initial_distribution": {"type": "object"},
        "creator_allocation": {"type": "string"},
        "user_acquisition": {"type": "string"},
        "vesting_schedule": {"type": "string"}
      },
      "required": ["initial_distribution", "creator_allocation", "user_acquisition", "vesting_schedule"]
    },
    "fee_share_configuration": {
      "type": "object",
      "properties": {
        "fee_share_required": {"type": "boolean", "enum": [true]},
        "creator_bps": {"type": "number", "minimum": 1, "maximum": 9999},
        "partner_bps": {"type": "number", "enum": [2500]},
        "social_fee_claimers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "provider": {"enum": ["github", "twitter", "kick"]},
              "username": {"type": "string"},
              "bps": {"type": "number", "minimum": 1, "maximum": 9999},
              "role_description": {"type": "string"}
            },
            "required": ["provider", "username", "bps", "role_description"]
          }
        },
        "total_bps": {"type": "number", "enum": [10000]},
        "bps_breakdown": {"type": "object"},
        "partner_key": {"type": "string", "enum": ["FDYcVLxHkekUFz4M29hCuBH3vbf1aLm62GEFZxLFdGE7"]},
        "partner_program": {"type": "string", "enum": ["app-factory"]}
      },
      "required": ["fee_share_required", "creator_bps", "partner_bps", "total_bps", "partner_key", "partner_program"]
    },
    "app_behavior": {
      "type": "object",
      "properties": {
        "zero_token_fallback": {"type": "string"},
        "minimum_balance_required": {"type": "string"},
        "token_earning_mechanisms": {"type": "array", "items": {"type": "string"}},
        "spending_triggers": {"type": "array", "items": {"type": "string"}},
        "wallet_auth_strategy": {"type": "string"}
      },
      "required": ["zero_token_fallback", "minimum_balance_required", "token_earning_mechanisms", "spending_triggers", "wallet_auth_strategy"]
    }
  },
  "required": ["token_necessity", "app_behavior"]
}
```

**Conditional Requirements**:
- If `token_necessity.requires_token` is `true`: `token_definition`, `supply_model`, `ownership_model`, `fee_share_configuration` are required
- If `token_necessity.requires_token` is `false`: Only `token_necessity` and `app_behavior` are required

## EXECUTION STEPS

### 1. Evaluate Token Necessity (MANDATORY)
From W1 output, determine if the app genuinely benefits from a custom token:
- Analyze onchain state requirements
- Evaluate network effects and shared coordination needs
- Assess whether wallet-based auth alone is sufficient
- Consider user experience implications

### 2a. If Token Required: Define Token Model

#### Select Primary Token Role
Choose the ONE role that best serves the app's function:
- **ACCESS**: If app has gated features/content
- **USAGE**: If users perform discrete, paid actions
- **FEE CAPTURE**: If app generates revenue to share
- **SETTLEMENT**: If app mediates value exchange
- **GOVERNANCE-LITE**: If users need decision-making power

Document why this role was chosen over alternatives.

#### Configure Social Fee Claimers (Optional)
Specify team members and contributors who should receive token fees:
```json
{
  "social_fee_claimers": [
    {
      "provider": "github",
      "username": "lead_developer",
      "bps": 1000,
      "role_description": "Lead developer - core architecture and implementation"
    },
    {
      "provider": "twitter", 
      "username": "@marketing_lead",
      "bps": 500,
      "role_description": "Marketing lead - community growth and user acquisition"
    }
  ]
}
```

#### Define Supply Economics
Based on chosen role:
- **Fixed Supply**: For store-of-value or governance tokens
- **Mint-on-Use**: For usage tokens that scale with adoption
- **Hybrid**: For complex models with both fixed and variable components

Include inflation/deflation mechanisms and burn schedules.

#### Configure Fee Share (MANDATORY FOR TOKENS)
Token Launch v2 requires explicit fee share configuration:
- **Creator BPS**: Explicitly calculated (e.g., 7500 for 75%)
- **Social Claimers BPS**: Sum of all social contributor allocations
- **Partner BPS**: Always 2500 (25% to App Factory)
- **Total BPS**: Must equal 10000

Validate: `creator_bps + social_claimers_bps + partner_bps = 10000`

### 2b. If Token Not Required: Define Token-Free Behavior

Specify how the app works without custom tokens:
- Wallet-based authentication strategy
- SOL/USDC payment flows (if any)
- Onchain data storage approach
- User acquisition without token incentives

### 3. Design App Integration
For both token and token-free apps, specify:
- User onboarding flow (wallet connection)
- Core app functionality access
- Payment/transaction patterns
- Onchain vs. offchain data strategy

## TOKEN ROLE GUIDELINES (IF CREATING TOKEN)

### ACCESS Tokens
- Users acquire tokens to unlock features
- Spending should be infrequent but meaningful
- Consider time-based access vs. permanent unlocks
- Ensure core app function remains available without tokens

### USAGE Tokens  
- Users spend tokens for each action/transaction
- Pricing should be predictable and reasonable
- Consider bulk purchase discounts
- Provide free allowance for new users

### FEE CAPTURE Tokens
- Token holders receive proportional revenue share
- Define clearly what revenue is shared
- Implement sustainable distribution mechanisms
- Ensure token holders have skin in the game

### SETTLEMENT Tokens
- All app transactions denominated in token
- Price stability mechanisms may be needed
- Consider volatility impact on user experience
- Provide clear token acquisition paths

### GOVERNANCE-LITE Tokens
- Focus on simple, meaningful decisions
- Avoid complex voting mechanisms
- Consider delegation for inactive holders
- Ensure decisions actually affect app behavior

## SOCIAL FEE CLAIMERS BEST PRACTICES

### GitHub Integration Strategy
- **Lead Developer**: 10-20% BPS for technical leadership
- **Core Contributors**: 5-10% BPS for significant contributions
- **Occasional Contributors**: 1-5% BPS for specific features

### Team Distribution Examples
```typescript
// Balanced team (7 people)
creator: 4000 BPS (40%)
github lead_dev: 1500 BPS (15%)
github ui_designer: 1000 BPS (10%)
github backend_dev: 1000 BPS (10%)
twitter marketing_lead: 500 BPS (5%)
twitter community_mgr: 500 BPS (5%)
partner: 1500 BPS (15%)

// Solo creator with advisors
creator: 7000 BPS (70%)
github advisor_dev: 500 BPS (5%)
twitter marketing_advisor: 500 BPS (5%)
partner: 2000 BPS (20%)
```

### Username Validation
- **GitHub**: Alphanumeric + hyphens, 1-39 chars
- **Twitter**: @ prefix + alphanumeric + underscores, max 15 chars  
- **Kick**: Alphanumeric + underscores, 1-25 chars

## SUCCESS CRITERIA

W2 is successful when:
- [ ] Token necessity clearly evaluated and justified
- [ ] If creating token: Primary token role clearly selected and justified
- [ ] If creating token: Fee share configuration totals exactly 10000 BPS
- [ ] If creating token: Social fee claimers properly formatted and validated
- [ ] App behavior with/without tokens clearly defined
- [ ] Wallet authentication strategy specified
- [ ] Token economics support app sustainability (if applicable)
- [ ] Decision reasoning between token vs. token-free clearly documented

## FAILURE CONDITIONS

STOP execution if:
- Cannot determine if app benefits from custom token
- If creating token: Cannot identify clear primary token role
- If creating token: Fee share BPS does not total 10000
- If creating token: Social fee claimers contain invalid usernames
- App behavior without wallet connection is undefined
- Token model is purely speculative (if applicable)

Write detailed failure analysis explaining economic model or necessity evaluation issues.

**DO NOT OUTPUT JSON IN CHAT**. Write all artifacts to disk only.
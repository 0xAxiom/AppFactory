# Build Prompt: {{app_name}}

**Generated:** {{timestamp}}
**App Slug:** {{app_slug}}
**Token Integration:** {{#if with_tokens}}ENABLED{{else}}DISABLED{{/if}}

---

## Your Mission

Build a complete Next.js 14 web application based on this idea:

> {{idea}}

{{#if with_tokens}}
This app includes Solana wallet integration and token support. Users can connect their wallet and interact with your token after you launch on factoryapp.dev.
{{else}}
This is a standard web application without blockchain integration. You can add token support later if needed.
{{/if}}

---

## Technical Requirements

### Stack (Required)

- **Framework:** Next.js 14 with App Router
- **Language:** TypeScript (strict mode)
- **Styling:** Tailwind CSS
- **State:** Zustand for global state
{{#if with_tokens}}
- **Wallet:** @solana/wallet-adapter-react (Phantom, Solflare)
- **Blockchain:** @solana/web3.js
{{/if}}

### Project Structure

```
{{app_slug}}/
├── src/
│   ├── app/
│   │   ├── layout.tsx          # Root layout with providers
│   │   ├── page.tsx            # Homepage
│   │   ├── providers.tsx       # {{#if with_tokens}}Wallet + context providers{{else}}Context providers{{/if}}
│   │   └── globals.css         # Tailwind globals
│   ├── components/
│   │   ├── ui/                 # Base UI components (Button, Card, etc)
{{#if with_tokens}}
│   │   ├── wallet/             # Wallet components
{{/if}}
│   │   └── [feature]/          # Feature-specific components
│   ├── hooks/
{{#if with_tokens}}
│   │   └── useTokenBalance.ts  # Token balance hook
{{else}}
│   │   └── index.ts            # Custom hooks
{{/if}}
│   ├── lib/
│   │   └── utils.ts            # Utility functions
│   ├── config/
│   │   └── constants.ts        # {{#if with_tokens}}Token address, API URLs{{else}}API URLs, app config{{/if}}
│   └── types/
│       └── index.ts            # TypeScript types
├── public/                     # Static assets
├── package.json
├── tailwind.config.ts
├── tsconfig.json
├── postcss.config.js
├── .env.example
└── next.config.js
```

---

{{#if with_tokens}}
## Wallet Integration

### providers.tsx

```typescript
"use client";

import { useMemo } from "react";
import {
  ConnectionProvider,
  WalletProvider,
} from "@solana/wallet-adapter-react";
import { WalletModalProvider } from "@solana/wallet-adapter-react-ui";
import {
  PhantomWalletAdapter,
  SolflareWalletAdapter,
} from "@solana/wallet-adapter-wallets";
import { clusterApiUrl } from "@solana/web3.js";

import "@solana/wallet-adapter-react-ui/styles.css";

export function Providers({ children }: { children: React.ReactNode }) {
  const network = process.env.NEXT_PUBLIC_SOLANA_NETWORK as "mainnet-beta" | "devnet" || "mainnet-beta";

  const endpoint = useMemo(() => {
    return process.env.NEXT_PUBLIC_SOLANA_RPC_URL || clusterApiUrl(network);
  }, [network]);

  const wallets = useMemo(
    () => [
      new PhantomWalletAdapter(),
      new SolflareWalletAdapter(),
    ],
    []
  );

  return (
    <ConnectionProvider endpoint={endpoint}>
      <WalletProvider wallets={wallets} autoConnect>
        <WalletModalProvider>{children}</WalletModalProvider>
      </WalletProvider>
    </ConnectionProvider>
  );
}
```

---

## Token Integration

### constants.ts

```typescript
import { PublicKey } from "@solana/web3.js";

// Token will be set after launch on factoryapp.dev
export const TOKEN_MINT = new PublicKey(
  process.env.NEXT_PUBLIC_TOKEN_MINT || "11111111111111111111111111111111"
);
export const TOKEN_DECIMALS = 9;
```

### useTokenBalance.ts

```typescript
import { useConnection, useWallet } from "@solana/wallet-adapter-react";
import { useState, useEffect } from "react";
import { TOKEN_MINT, TOKEN_DECIMALS } from "@/config/constants";
import { getAssociatedTokenAddress, getAccount } from "@solana/spl-token";

export function useTokenBalance() {
  const { connection } = useConnection();
  const { publicKey } = useWallet();
  const [balance, setBalance] = useState<number | null>(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (!publicKey) {
      setBalance(null);
      return;
    }

    const fetchBalance = async () => {
      setLoading(true);
      try {
        const ata = await getAssociatedTokenAddress(TOKEN_MINT, publicKey);
        const account = await getAccount(connection, ata);
        setBalance(Number(account.amount) / Math.pow(10, TOKEN_DECIMALS));
      } catch {
        setBalance(0);
      } finally {
        setLoading(false);
      }
    };

    fetchBalance();
  }, [publicKey, connection]);

  return { balance, loading };
}
```

---
{{else}}
## Providers Setup

### providers.tsx

```typescript
"use client";

import { ReactNode } from "react";

// Add your context providers here (auth, theme, etc.)

export function Providers({ children }: { children: ReactNode }) {
  return (
    <>
      {children}
    </>
  );
}
```

---
{{/if}}

## Design Guidelines

- **Theme:** Dark mode by default
- **Colors:** Use app-appropriate color palette
- **Typography:** Clean, modern, readable
- **Responsiveness:** Mobile-first, works on all screen sizes
- **Accessibility:** WCAG 2.1 AA compliant

---

## Required Pages

Based on the app idea, create appropriate pages. At minimum:

1. **Homepage** - Main landing/dashboard
2. **Feature pages** - Core app functionality
{{#if with_tokens}}
3. **Profile** - User profile (wallet-based)
{{else}}
3. **Profile** - User profile
{{/if}}

---

## Output Checklist

When you're done, verify:

- [ ] All files created in correct structure
- [ ] `npm install` runs without errors
- [ ] `npm run dev` starts the app
{{#if with_tokens}}
- [ ] Wallet connect button works
- [ ] Token balance displays (shows 0 if no tokens)
{{/if}}
- [ ] All core features functional
- [ ] Responsive on mobile
- [ ] `.env.example` included with required vars

---

## Notes

{{#if with_tokens}}
- Token address will be set after launching on factoryapp.dev
- Focus on great UX and functional features
- Use mock data for backend-dependent features
- Include clear README instructions for what needs backend setup
{{else}}
- Focus on great UX and functional features
- Use mock data for backend-dependent features
- Include clear README instructions for what needs backend setup
- Token integration can be added later if needed
{{/if}}

---

**Now build this app!**

# Ralph QA Failure Report Template

**Version**: 1.0.0
**Purpose**: Standardized failure reporting for Ralph QA across all pipelines

---

## When to Use This Template

Use this template when Ralph QA reaches the maximum iteration limit (typically 3 or 20 passes depending on the pipeline) without achieving the required quality threshold (≥97%).

---

## Template

```markdown
# RALPH FAILURE REPORT

## Summary

| Field          | Value                                   |
| -------------- | --------------------------------------- |
| Pipeline       | [app-factory / website-pipeline / etc.] |
| Build          | [build name / slug]                     |
| Timestamp      | [ISO-8601]                              |
| Iterations Run | [X / max]                               |
| Final Score    | [XX%] (required: ≥97%)                  |
| Verdict        | **FAIL**                                |

---

## Blocking Issues

Issues that prevented reaching the quality threshold.

### Issue 1: [Title]

- **Category**: [Build / UI / Accessibility / Security / Performance]
- **Severity**: CRITICAL
- **File(s)**: [affected files]
- **Description**: [What's wrong]
- **Attempted Fix**: [What was tried]
- **Why It Persists**: [Why fix didn't work]
- **Suggested Resolution**: [What user should do]

### Issue 2: [Title]

[Same format as above]

---

## Non-Blocking Issues

Issues documented but not preventing quality threshold.

| #   | Category | Severity | Description | Suggestion |
| --- | -------- | -------- | ----------- | ---------- |
| 1   | [cat]    | MEDIUM   | [desc]      | [fix]      |
| 2   | [cat]    | LOW      | [desc]      | [fix]      |

---

## Quality Breakdown

| Category      | Score | Weight | Notes                   |
| ------------- | ----- | ------ | ----------------------- |
| Build Quality | XX%   | 25%    | [npm install, build]    |
| UI/UX Quality | XX%   | 25%    | [design, accessibility] |
| Code Quality  | XX%   | 25%    | [TypeScript, patterns]  |
| Documentation | XX%   | 25%    | [README, research]      |
| **Weighted**  | XX%   | 100%   | Below 97% threshold     |

---

## Iteration History

### Pass 1

- **Action**: [What was fixed/improved]
- **Result**: [Score after]
- **Outcome**: [Still failing / Improved]

### Pass 2

- **Action**: [What was fixed/improved]
- **Result**: [Score after]
- **Outcome**: [Still failing / Improved]

### Pass N (Final)

- **Action**: [What was attempted]
- **Result**: [Final score]
- **Outcome**: **FAIL - Max iterations reached**

---

## Root Cause Analysis

### Primary Cause

[Main reason for failure]

### Contributing Factors

1. [Factor 1]
2. [Factor 2]
3. [Factor 3]

### Systemic Issues (if any)

[Issues that may affect other builds]

---

## Recommended Actions

### For User (Immediate)

1. [ ] [First action user should take]
2. [ ] [Second action]
3. [ ] [Third action]

### For User (Before Re-running)

1. [ ] [Prerequisite 1]
2. [ ] [Prerequisite 2]

### For Pipeline Maintainers (if systemic)

- [Recommendation for improving the pipeline]

---

## Re-run Instructions

After addressing the blocking issues:

\`\`\`bash

# Navigate to build directory

cd [build-path]

# Verify fixes

[verification commands]

# Re-run Ralph QA

[ralph command or trigger]
\`\`\`

---

## Attachments

- [ ] Error logs: `[path-to-logs]`
- [ ] Screenshots: `[path-to-screenshots]`
- [ ] Console output: `[path-to-output]`

---

_Generated by Ralph QA v[version] at [timestamp]_
```

---

## Category Definitions

### Severity Levels

| Severity | Definition                              | Blocks Quality |
| -------- | --------------------------------------- | -------------- |
| CRITICAL | Build cannot run or has security issues | YES            |
| HIGH     | Major functionality broken              | YES            |
| MEDIUM   | Minor issues, workarounds exist         | NO             |
| LOW      | Polish/enhancement items                | NO             |

### Issue Categories

| Category      | Examples                                                   |
| ------------- | ---------------------------------------------------------- |
| Build         | npm install fails, TypeScript errors, missing dependencies |
| UI            | Layout broken, missing components, styling issues          |
| Accessibility | Missing alt text, poor contrast, no keyboard nav           |
| Security      | Exposed secrets, XSS vulnerabilities, insecure deps        |
| Performance   | Slow load, memory leaks, bundle size                       |
| Documentation | Missing README, incomplete research                        |
| Monetization  | RevenueCat not integrated, paywall broken                  |

---

## Integration Notes

### For Pipeline CLAUDE.md Files

Add this to error recovery section:

```markdown
### Ralph Failure Protocol

When Ralph reaches max iterations without PASS:

1. Generate `ralph/FAILURE_REPORT.md` using the standard template
2. Include all blocking issues with attempted fixes
3. Provide clear re-run instructions
4. Do NOT claim build is complete
5. Inform user of failure and next steps
```

### For Scripts

Ralph loops should output structured JSON that can be converted to this template:

```json
{
  "verdict": "FAIL",
  "score": 85,
  "threshold": 97,
  "iterations": 3,
  "maxIterations": 3,
  "blockingIssues": [...],
  "nonBlockingIssues": [...],
  "history": [...],
  "rootCause": "...",
  "recommendations": [...]
}
```

---

## Example

See `/docs/examples/ralph-failure-example.md` for a complete example report.

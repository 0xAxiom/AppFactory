{
  "$ref": "schemas/_shared/meta.schema.json",
  "allOf": [
    {
      "$ref": "schemas/_shared/meta.schema.json"
    },
    {
      "type": "object",
      "properties": {
        "monetization_strategy": {
          "type": "object",
          "properties": {
            "business_model": {
              "type": "object",
              "properties": {
                "revenue_model": {"type": "string", "enum": ["Subscription"]},
                "pricing_strategy": {"type": "string"},
                "value_justification": {"type": "string"},
                "competitor_pricing_analysis": {"type": "string"}
              },
              "required": ["revenue_model", "pricing_strategy", "value_justification", "competitor_pricing_analysis"]
            },
            "subscription_tiers": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "tier_name": {"type": "string"},
                  "price_monthly": {"type": "string"},
                  "price_annual": {"type": "string"},
                  "features_included": {"type": "array", "items": {"type": "string"}},
                  "target_user_segment": {"type": "string"}
                },
                "required": ["tier_name", "price_monthly", "price_annual", "features_included", "target_user_segment"]
              },
              "minItems": 1
            },
            "trial_strategy": {
              "type": "object",
              "properties": {
                "trial_type": {"type": "string", "enum": ["Free trial", "Freemium", "Free trial + Freemium"]},
                "trial_duration": {"type": "string"},
                "trial_limitations": {"type": "string"},
                "conversion_strategy": {"type": "string"}
              },
              "required": ["trial_type", "trial_duration", "trial_limitations", "conversion_strategy"]
            },
            "revenuecat_integration": {
              "type": "object",
              "properties": {
                "product_configuration": {"type": "string"},
                "entitlement_structure": {"type": "string"},
                "purchase_flow": {"type": "string"},
                "restoration_strategy": {"type": "string"}
              },
              "required": ["product_configuration", "entitlement_structure", "purchase_flow", "restoration_strategy"]
            }
          },
          "required": ["business_model", "subscription_tiers", "trial_strategy", "revenuecat_integration"]
        },
        "standards_compliance": {
          "$ref": "schemas/_shared/common.schema.json#/definitions/standards_compliance"
        }
      },
      "required": ["monetization_strategy", "standards_compliance"]
    }
  ]
}
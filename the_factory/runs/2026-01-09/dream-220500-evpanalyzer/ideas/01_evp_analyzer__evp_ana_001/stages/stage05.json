{
  "meta": {
    "run_id": "dream-220500-evpanalyzer",
    "idea_id": "evp_ana_001",
    "idea_name": "EVP Analyzer",
    "idea_dir": "01_evp_analyzer__evp_ana_001",
    "source_root": "runs/2026-01-09/dream-220500-evpanalyzer/ideas/01_evp_analyzer__evp_ana_001/",
    "input_stage_paths": [
      "runs/2026-01-09/dream-220500-evpanalyzer/ideas/01_evp_analyzer__evp_ana_001/stages/stage02.7.json",
      "runs/2026-01-09/dream-220500-evpanalyzer/ideas/01_evp_analyzer__evp_ana_001/stages/stage04.json"
    ],
    "boundary_path": "runs/2026-01-09/dream-220500-evpanalyzer/ideas/01_evp_analyzer__evp_ana_001/meta/boundary.json",
    "generated_at": "2026-01-09T22:11:00Z"
  },
  "technical_architecture": {
    "stack": {
      "framework": "Expo SDK 52",
      "language": "TypeScript",
      "navigation": "Expo Router 4.x",
      "state_management": "React Context + useReducer",
      "storage": "AsyncStorage + expo-file-system",
      "subscriptions": "RevenueCat"
    },
    "directory_structure": {
      "app": "Expo Router file-based routes",
      "src/components": "Reusable UI components",
      "src/screens": "Screen-specific components",
      "src/hooks": "Custom React hooks",
      "src/services": "Audio, storage, subscription services",
      "src/stores": "Context providers and reducers",
      "src/utils": "Utility functions",
      "src/types": "TypeScript type definitions",
      "src/constants": "App constants and design tokens",
      "src/ui/icons": "SVG icon components"
    },
    "services": {
      "AudioService": {
        "responsibilities": ["Recording management", "Playback control", "Waveform extraction"],
        "dependencies": ["expo-av", "@siteed/expo-audio-studio"]
      },
      "AnalysisService": {
        "responsibilities": ["Anomaly detection", "Spectrogram generation", "Frequency analysis"],
        "dependencies": ["@siteed/expo-audio-studio"]
      },
      "StorageService": {
        "responsibilities": ["Session CRUD", "Audio file management", "Settings persistence"],
        "dependencies": ["expo-file-system", "@react-native-async-storage/async-storage"]
      },
      "SubscriptionService": {
        "responsibilities": ["Entitlement checking", "Purchase flow", "Restore purchases"],
        "dependencies": ["react-native-purchases"]
      }
    },
    "data_flow": {
      "recording": "Microphone → expo-av → Raw audio buffer → Waveform data → Display",
      "analysis": "Audio file → expo-audio-studio → Spectrogram/Anomalies → Display",
      "storage": "Session data → StorageService → AsyncStorage (metadata) + FileSystem (audio)",
      "subscription": "RevenueCat → SubscriptionContext → Feature gates"
    },
    "offline_first": {
      "strategy": "Full offline capability",
      "network_required_for": ["Subscription purchases", "Restore purchases"],
      "cached_locally": ["All sessions", "Settings", "Entitlement state"]
    }
  }
}
